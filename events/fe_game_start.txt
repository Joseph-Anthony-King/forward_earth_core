namespace = fe

### fe.00 - Set forwardEarth global flag
event = {
	id = fe.00
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = { 
        set_global_flag = forwardEarthModEnabled
        log = "ForwardEarth mod loaded..."
    }
}

### fe.01 - Rename binary planet barycenters
event = {
    id = fe.01
    hide_window = yes
    is_triggered_only = yes

    immediate = {

        every_galaxy_planet = {
            limit = {
                has_planet_flag = planetary_barrycenter              
            }
            set_name = "NAME_Empty"
        }
        log = "Binary planet barrycenters renamed..."
    }
}

### fe.02 - Spawn Sagittarius A*
event = {
	id = fe.02
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		no_scope = {
            spawn_system = {
                min_distance = 1
                max_distance = 1
                initializer = sagittarius_a_star_initializer
				hyperlane = no
            }
		}
                    
        random_system = {
            limit = {
                has_star_flag = galactic_center             
            }

            spawn_natural_wormhole = {
                bypass_type = wormhole
                random_pos = no
                orbit_angle = 360
            }
                    
            random_system = {
                spawn_natural_wormhole = {
                    bypass_type = wormhole
                    random_pos = no
                    orbit_angle = 360
                }
                link_wormholes = prev
            }
        }

        log = "Sagittarius A* spawned..."
    }
}

### fe.03 - Spawn Trantor
event = {
	id = fe.03
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		no_scope = {

            if = {
                
                limit = {
                    galaxy_size = tiny
                }
            
                spawn_system = {
                    min_distance = 20
                    max_distance = 20
                    initializer = trantor_initializer
                }
            }

            if = {
                
                limit = {
                    galaxy_size = small
                }
            
                spawn_system = {
                    min_distance = 44
                    max_distance = 44
                    initializer = trantor_initializer
                }
            }

            if = {
                
                limit = {
                    galaxy_size = medium
                }
            
                spawn_system = {
                    min_distance = 60
                    max_distance = 60
                    initializer = trantor_initializer
                }
            }

            if = {
                
                limit = {
                    OR = {
                        galaxy_size = large
                        galaxy_size = huge
                    }
                }
            
                spawn_system = {
                    min_distance = 70
                    max_distance = 70
                    initializer = trantor_initializer
                }
            }

            if = {
                
                limit = {
                    OR = {
                        galaxy_size = gigantic
                        galaxy_size = immense
                    }
                }
            
                spawn_system = {
                    min_distance = 80
                    max_distance = 80
                    initializer = trantor_initializer
                }
            }
		}
        log = "Trantor spawned..."
    }
}

### fe.04 - Spawn Terminus
event = {
	id = fe.04
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		no_scope = {

            if = {
                
                limit = {
                    galaxy_size = tiny
                }
            
                spawn_system = {
                    min_distance = 216
                    max_distance = 218
                    initializer = terminus_initializer
                }
            }

            if = {
                
                limit = {
                    galaxy_size = small
                }
            
                spawn_system = {
                    min_distance = 316
                    max_distance = 318
                    initializer = terminus_initializer
                }
            }

            if = {
                
                limit = {
                    galaxy_size = medium
                }
            
                spawn_system = {
                    min_distance = 416
                    max_distance = 418
                    initializer = terminus_initializer
                }
            }

            if = {
                
                limit = {
                    OR = {
                        galaxy_size = large
                        galaxy_size = huge
                    }
                }
            
                spawn_system = {
                    min_distance = 478
                    max_distance = 480
                    initializer = terminus_initializer
                }
            }

            if = {
                
                limit = {
                    OR = {
                        galaxy_size = gigantic
                        galaxy_size = immense
                    }
                }
            
                spawn_system = {
                    min_distance = 518
                    max_distance = 520
                    initializer = terminus_initializer
                }
            }
		}
        log = "Terminus spawned..."
    }
}

### fe.05 - Instantiate Earth if not done so yet
event = {
	id = fe.05
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		if = {
			# If there are no Sols
			limit = {
				NOT = {
					any_system = {
						has_star_flag = sol_system
					}
				}
			}
			random_list = {
				75 = {
					random_system = {
						limit = { has_owner = no }
						spawn_system = { initializer = "special_init_03" }
					}
				}
				25 = {
					random_system = {
						limit = { has_owner = no }
						spawn_system = { initializer = "special_init_04" }
					}
				}
			}
            log = "Sol spawned..."
		}
        else = {
            log = "Sol already spawned..."
        }
    }
}

### fe.06 - Instantiate LHC for UNE
event = {
	id = fe.06
	hide_window = yes
	is_triggered_only = yes

	immediate = {		

        if = {
            random_country = {
                limit = {
                    AND = {
                        has_country_flag = human_1
                        num_ai_empires_setting > 1
                    }
                }

                random_country = {
                    limit = { has_country_flag = human_1 }
                    owner_species = { save_event_target_as = human_species }
                }

                random_galaxy_planet = {
                    limit = {
                        AND = {
                            not = { any_country = { has_country_flag = custodian_faction } }
                            not = { any_country = { has_country_flag = icarus_faction } }
                            any_country = { has_country_flag = human_1 }
                            has_planet_flag = 40_eridani_a_two
                        }                
                    }

                    create_country = {
                        name = "NAME_League_of_Human_Colonies"
                        name_list = HUMAN1              
                        ship_prefix = "LHCS"
                        
                        authority = auth_oligarchic
                        
                        origin = "origin_lost_colony"

                        species = event_target:human_species
                        ethos = {
                            ethic = ethic_authoritarian
                            ethic = ethic_fanatic_militarist
                        }
                        civics = {
                            civic = civic_cutthroat_politics
                            civic = civic_warrior_culture
                        }
                        flag = {
                            icon = {
                                category="spherical"
                                file="flag_spherical_8.dds"
                            }
                            background = {
                                category="backgrounds"
                                file="vertical.dds"
                            }
                            colors = {
                                "dark_green"
                                "yellow"
                                "null"
                                "null"
                            }
                        }
                        type = default
                                
                        effect = {
                            save_global_event_target_as = npc_LHC
                            add_resource = {
                                minerals = 0
                                energy = 0
                                food = 0
                                alloys = 0
                                consumer_goods = 0
                                influence = 0
                            }
                        }
                    }

                    event_target:npc_LHC = {
                        set_country_flag = human_3
                        set_country_flag = human_faction
                        save_global_event_target_as = npc_LHC
                    }
                    
                    set_owner = event_target:npc_LHC

                    while = {
                        count = 14
                        create_pop = {
                            species = event_target:human_species
                        }
                    }

                    set_owner = last_created_country
                    set_capital = yes
                    add_district = district_farming
                    add_district = district_farming
                    add_district = district_mining
                    add_district = district_generator
                    add_building = building_capital

                    last_created_country = {
                        capital_scope = { set_name = "40 Eridani A II" }
                        set_graphical_culture = mammalian_01
                    }

                    log = "LHC instantiated..."
                }
            }
        }
        else = {
            log = "UNE not instantiated..."
        }
    }
}

### fe.07 - Set Forward Earth planet modifiers
event = {
	id = fe.07
	hide_window = yes
	is_triggered_only = yes

	immediate = {

        every_galaxy_planet = {

            limit = { has_planet_flag = 40_eridani_a_two }
            add_modifier = {
                modifier = "high_gravity"
                days = -1
            }
            add_modifier = {
                modifier = "strong_magnetic_field"
                days = -1
            }
            change_pc = pc_desert
            set_planet_entity = { entity = "desert_planet_02_entity" }
        }

        log = "Forward Earth planeta modified..."
    }
}
